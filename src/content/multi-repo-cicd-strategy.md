---
title: ì—¬ëŸ¬ ë ˆí¬ì§€í† ë¦¬ë¥¼ í•œ ì„œë²„ì— ë°°í¬í•˜ê¸° - Docker Composeë¶€í„° K8sê¹Œì§€
excerpt: ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜ì—ì„œ ì¤‘ì•™ ë°°í¬ ë ˆí¬ì§€í† ë¦¬ íŒ¨í„´ê³¼ GitOps ì „ëµ
category: cicd
tags:
  - github-actions
  - docker-compose
  - argocd
  - gitops
  - microservices
date: '2025-10-26'
---

## ğŸ’¡ í•™ìŠµ ë™ê¸°

ë¶€íŠ¸ìº í”„ì—ì„œ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•˜ëŠ” ë„ì¤‘ ec2 ì— ì„œë²„ë¥¼ ì˜¬ë ¤ì„œ í…ŒìŠ¤íŠ¸í•˜ëŠ” ìƒí™©ì´ ìˆì—ˆìŠµë‹ˆë‹¤.

user-service, board-service ë‘ ê°œì˜ ë ˆí¬ì§€í† ë¦¬ë¥¼ ìš´ì˜í•˜ëŠ”ë°, í•˜ë‚˜ì˜ EC2 ì¸ìŠ¤í„´ìŠ¤ì— ë°°í¬í•´ì„œ docker-composeë¡œ í†µí•© ì‹¤í–‰í•´ì•¼ë˜ëŠ” êµ¬ì¡°ì˜€ìŠµë‹ˆë‹¤.

"ê·¸ëŸ¼ CIëŠ” ì–´ë–»ê²Œ êµ¬ì„±í•˜ì§€?"

ê° ë ˆí¬ì§€í† ë¦¬ë§ˆë‹¤ CIë¥¼ ë¶™ì—¬ì•¼ í•˜ë‚˜? ì•„ë‹ˆë©´ ë°°í¬ ì „ìš© ë ˆí¬ë¥¼ ë”°ë¡œ ë§Œë“¤ì–´ì•¼ í•˜ë‚˜? ê³ ë¯¼ì´ ë¬ìŠµë‹ˆë‹¤.

ì‹¤ë¬´ì—ì„œëŠ” ì´ëŸ° ìƒí™©ì„ ì–´ë–»ê²Œ í•´ê²°í•˜ëŠ”ì§€ ì°¾ì•„ë³´ë‹ˆ **ì¤‘ì•™ ë°°í¬ ë ˆí¬ì§€í† ë¦¬ íŒ¨í„´**ì´ë¼ëŠ” ê²Œ ìˆëŠ”ê²ƒì„ ë³´ê³ ,

Docker Composeì—ì„œ ì‹œì‘í•´ì„œ Kubernetes + ArgoCDê¹Œì§€ í™•ì¥ë˜ëŠ” ê²ƒê¹Œì§€ ê³µë¶€í•œ ë‚´ìš©ì„ ì •ë¦¬í•´ ë³´ì•˜ìŠµë‹ˆë‹¤.


## ğŸ—ï¸ ë¬¸ì œ ìƒí™©

### ì´ˆê¸° êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   user-service  â”‚     â”‚  board-service  â”‚
â”‚   GitHub Repo   â”‚     â”‚   GitHub Repo   â”‚
â”‚  - User ë¡œì§    â”‚     â”‚  - Board ë¡œì§   â”‚
â”‚  - Dockerfile   â”‚     â”‚  - Dockerfile   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                       â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚ ì–´ë–»ê²Œ ë°°í¬?
                     â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚    EC2 Instance       â”‚
          â”‚   docker-compose up   â”‚
          â”‚  - user-service       â”‚
          â”‚  - board-service      â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ê³ ë¯¼í–ˆë˜ ì :**
- ê° ë ˆí¬ì— CIë¥¼ ë§Œë“¤ë©´ ë‘˜ ë‹¤ EC2ì— ë°°í¬í•´ì•¼ í•˜ë‚˜?
- docker-compose.ymlì€ ì–´ë””ì— ë‘ì§€?
- í•œìª½ë§Œ ì—…ë°ì´íŠ¸ëì„ ë•Œ ì–´ë–»ê²Œ í•˜ì§€?

## ğŸ¯ í•´ê²°ì±…: ì¤‘ì•™ ë°°í¬ ë ˆí¬ì§€í† ë¦¬ íŒ¨í„´

3ê°œì˜ ë ˆí¬ì§€í† ë¦¬ë¡œ ë¶„ë¦¬í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   GitHub/GitLab                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  user-service   â”‚  board-service  â”‚  deploy-config  â”‚
â”‚  (User API)     â”‚  (Board API)    â”‚  (ë°°í¬ ì „ìš©)    â”‚
â”‚                 â”‚                 â”‚                  â”‚
â”‚  - User ë¡œì§    â”‚  - Board ë¡œì§   â”‚  - docker-composeâ”‚
â”‚  - Dockerfile   â”‚  - Dockerfile   â”‚  - nginx ì„¤ì •    â”‚
â”‚  - ë‹¨ìœ„ í…ŒìŠ¤íŠ¸  â”‚  - ë‹¨ìœ„ í…ŒìŠ¤íŠ¸  â”‚  - í™˜ê²½ ë³€ìˆ˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ì—­í•  ë¶„ë¦¬

**ì•± ë ˆí¬ì§€í† ë¦¬ (user-service, board-service):**
- ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ê°œë°œ
- ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
- Docker ì´ë¯¸ì§€ ë¹Œë“œ & í‘¸ì‹œ
- âœ… **ë°°í¬ëŠ” í•˜ì§€ ì•ŠìŒ**

**ë°°í¬ ë ˆí¬ì§€í† ë¦¬ (deploy-config):**
- docker-compose.yml ê´€ë¦¬
- nginx ì„¤ì •
- í™˜ê²½ë³€ìˆ˜ (.env)
- âœ… **ì‹¤ì œ ë°°í¬ë§Œ ë‹´ë‹¹**

## ğŸ”„ CI/CD í”Œë¡œìš°

### Docker Compose ë²„ì „

```
ê°œë°œìê°€ user-service ì½”ë“œ ìˆ˜ì •
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. user-service  â”‚
â”‚    CI ì‹¤í–‰       â”‚
â”‚ - ì½”ë“œ ë¹Œë“œ      â”‚
â”‚ - í…ŒìŠ¤íŠ¸ ì‹¤í–‰    â”‚
â”‚ - Docker ì´ë¯¸ì§€  â”‚
â”‚   ë¹Œë“œ & í‘¸ì‹œ    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ deploy-config ë ˆí¬ì— ë°°í¬ íŠ¸ë¦¬ê±°
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. deploy-config â”‚
â”‚    ë°°í¬ ì‹¤í–‰     â”‚
â”‚ - EC2 ì ‘ì†       â”‚
â”‚ - ìƒˆ ì´ë¯¸ì§€ pull â”‚
â”‚ - docker-compose â”‚
â”‚   up -d user     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### user-service CI ì˜ˆì‹œ

```yaml
# user-service/.github/workflows/build.yml
...ì¤‘ëµ...

      # deploy-config ë ˆí¬ì— ë°°í¬ ìš”ì²­
      - name: Trigger Deployment
        uses: peter-evans/repository-dispatch@v2
        with:
          token: ${{ secrets.DEPLOY_TOKEN }}
          repository: yourname/deploy-config
          event-type: deploy-user-service
...
```

### deploy-config êµ¬ì¡°

```
deploy-config/
â”œâ”€â”€ docker-compose.yml
â”œâ”€â”€ .env.example
â”œâ”€â”€ nginx/
â”‚   â””â”€â”€ default.conf
â””â”€â”€ .github/
    â””â”€â”€ workflows/
        â””â”€â”€ deploy.yml
```

**docker-compose.yml:**
```yaml
version: '3.8'

services:
  user-service:
    image: ghcr.io/yourname/user-service:latest
    ports:
      - "3001:3001"
    environment:
      - BOARD_SERVICE_URL=http://board-service:3002
    networks:
      - backend

  board-service:
    image: ghcr.io/yourname/board-service:latest
    ports:
      - "3002:3002"
    environment:
      - USER_SERVICE_URL=http://user-service:3001
    networks:
      - backend

networks:
  backend:
    driver: bridge
```

**í•µì‹¬:**
- ì„œë¹„ìŠ¤ ê°„ í†µì‹ ì€ Docker ë„¤íŠ¸ì›Œí¬ë¡œ (service nameìœ¼ë¡œ í˜¸ì¶œ ê°€ëŠ¥)
- ì´ë¯¸ì§€ëŠ” ì™¸ë¶€ ë ˆì§€ìŠ¤íŠ¸ë¦¬ì—ì„œ pull
- í™˜ê²½ë³€ìˆ˜ë¡œ ì„œë¹„ìŠ¤ URL ì£¼ì…

## ğŸš€ ë¸Œëœì¹˜ ì „ëµ

"ê·¸ëŸ¼ main ë¸Œëœì¹˜ì— í‘¸ì‹œí•  ë•Œë§ˆë‹¤ ë°°í¬ë˜ëŠ” ê±°ë„¤?"

ë§ë‹¤. ê·¸ë˜ì„œ ë°°í¬ ì „ìš© ë¸Œëœì¹˜ë¥¼ ë”°ë¡œ ë§Œë“œëŠ” ê²Œ ì¢‹ë‹¤.

### ì¶”ì²œ ë¸Œëœì¹˜ êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                Git Flow                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   main      â”‚   develop   â”‚   deploy        â”‚
â”‚  (ì•ˆì •íŒ)   â”‚   (ê°œë°œ)    â”‚   (ë°°í¬ìš©)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ì›Œí¬í”Œë¡œìš° ì˜ˆì‹œ êµ¬ì¡° :**
```
feature/develop ë¸Œëœì¹˜ì—ì„œ ê°œë°œ
         â”‚
         â–¼
    PR â†’ main ë¨¸ì§€
         â”‚
         â–¼
    í…ŒìŠ¤íŠ¸ í†µê³¼ í™•ì¸
         â”‚
         â–¼
    deploy ë¸Œëœì¹˜ë¡œ ë¨¸ì§€ (ìˆ˜ë™)
         â”‚
         â–¼
    ìë™ ë°°í¬ ì‹¤í–‰
```

**CI ì„¤ì •:**
```yaml
on:
  push:
    branches:
      - main      # ë¹Œë“œë§Œ
      - deploy    # ë¹Œë“œ + ë°°í¬ íŠ¸ë¦¬ê±°

- name: Trigger Deployment
  if: github.ref == 'refs/heads/deploy'  # deploy ë¸Œëœì¹˜ì¼ ë•Œë§Œ
  uses: peter-evans/repository-dispatch@v2
```

**íš¨ê³¼:**
- main: ê°œë°œ ì‘ì—…, ì´ë¯¸ì§€ ë¹Œë“œë§Œ (ë°°í¬ ì•ˆ ë¨)
- deploy: ì‹¤ì œ ìš´ì˜ ë°°í¬ (ìˆ˜ë™ ë¨¸ì§€ë¡œ ì œì–´)
- ì‹¤ìˆ˜ë¡œ ìš´ì˜ ë°°í¬ë˜ëŠ” ê²ƒ ë°©ì§€ âœ…

## ğŸ¨ Kubernetes + ArgoCDë¡œ í™•ì¥

ê°™ì€ íŒ¨í„´ì„ K8s í™˜ê²½ìœ¼ë¡œ í™•ì¥í•  ìˆ˜ ìˆë‹¤. ë³¸ì§ˆì€ ë™ì¼í•˜ê³  ë„êµ¬ë§Œ ë°”ë€ë‹¤.

### ë ˆí¬ì§€í† ë¦¬ êµ¬ì¡° (K8s ë²„ì „)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Git Repositories                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   user     â”‚   board    â”‚   chat     â”‚   k8s-infra       â”‚
â”‚  service   â”‚  service   â”‚  service   â”‚  (manifests)      â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚            â”‚            â”‚              â”‚
      â”‚ Build      â”‚ Build      â”‚ Build        â”‚ ArgoCD
      â”‚ & Push     â”‚ & Push     â”‚ & Push       â”‚ watches
      â–¼            â–¼            â–¼              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Container Registry (GHCR)    â”‚  â”‚     ArgoCD       â”‚
â”‚  - user:v1.2.3                  â”‚  â”‚      Sync        â”‚
â”‚  - board:v2.1.0                 â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚  - chat:v1.0.5                  â”‚         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â–¼
                                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                   â”‚   Kubernetes     â”‚
                                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### k8s-infra ë ˆí¬ êµ¬ì¡°

```
k8s-infra/
â”œâ”€â”€ argocd/
â”‚   â””â”€â”€ applications/
â”‚       â”œâ”€â”€ user-service-app.yaml
â”‚       â”œâ”€â”€ board-service-app.yaml
â”‚       â””â”€â”€ chat-service-app.yaml
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ user-service/
â”‚   â”‚   â””â”€â”€ kustomization.yaml
â”‚   â”œâ”€â”€ board-service/
â”‚   â”‚   â””â”€â”€ kustomization.yaml
â”‚   â””â”€â”€ chat-service/
â”‚       â””â”€â”€ kustomization.yaml
â””â”€â”€ overlays/
    â”œâ”€â”€ development/
    â”œâ”€â”€ staging/
    â””â”€â”€ production/
```

### CI Pipeline (K8s ë²„ì „)

```yaml
# user-service/.github/workflows/cd.yml
name: Build and Deploy
on:
  push:
    branches: [main]

jobs:
  build-and-push:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3

      # 1. Docker ì´ë¯¸ì§€ ë¹Œë“œ
      - name: Build and push Docker image
        run: |
          VERSION="${GITHUB_SHA::8}"
          docker build -t ghcr.io/yourname/user-service:${VERSION} .
          docker push ghcr.io/yourname/user-service:${VERSION}

  update-k8s-manifest:
    needs: build-and-push
    runs-on: ubuntu-latest
    steps:
      # 2. k8s-infra ë ˆí¬ ì²´í¬ì•„ì›ƒ
      - name: Checkout k8s-infra repo
        uses: actions/checkout@v3
        with:
          repository: yourorg/k8s-infra
          token: ${{ secrets.DEPLOY_TOKEN }}

      # 3. ì´ë¯¸ì§€ íƒœê·¸ ì—…ë°ì´íŠ¸
      - name: Update image tag
        run: |
          cd services/user-service
          kustomize edit set image ghcr.io/yourname/user-service:${VERSION}

          git add .
          git commit -m "Update user-service to ${VERSION}"
          git push
```

**ArgoCDê°€ í•˜ëŠ” ì¼:**
- k8s-infra ë ˆí¬ë¥¼ 3ë¶„ë§ˆë‹¤ ì²´í¬
- ë³€ê²½ ê°ì§€ ì‹œ ìë™ìœ¼ë¡œ K8sì— ë°°í¬
- Rolling Updateë¡œ ë¬´ì¤‘ë‹¨ ë°°í¬

### kustomization.yaml ì˜ˆì‹œ

```yaml
# k8s-infra/services/user-service/kustomization.yaml
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

resources:
  - https://github.com/yourorg/user-service/k8s/base

images:
  - name: ghcr.io/yourorg/user-service
    newTag: abc12345  # CIê°€ ìë™ìœ¼ë¡œ ì—…ë°ì´íŠ¸
```

## ğŸ“Š íŒ¨í„´ ë¹„êµ

### Docker Compose vs Kubernetes

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    GitOps Pattern                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   Docker Compose ë²„ì „   â”‚      Kubernetes ë²„ì „           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                        â”‚                                 â”‚
â”‚  App Repos â†’ Build â†’   â”‚   App Repos â†’ Build â†’          â”‚
â”‚  â†’ Update deploy-repo  â”‚   â†’ Update k8s-infra repo      â”‚
â”‚  â†’ docker-compose up   â”‚   â†’ ArgoCD syncs to K8s        â”‚
â”‚                        â”‚                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ê³µí†µì :**
- ğŸ¯ ì¸í”„ë¼ ì„¤ì •ê³¼ ì•± ì½”ë“œ ë¶„ë¦¬
- ğŸ“ ì„ ì–¸ì  ì„¤ì • íŒŒì¼ (YAML)
- ğŸ”„ Gitì„ í†µí•œ ìƒíƒœ ê´€ë¦¬ (GitOps)
- ğŸš€ ìë™ ë°°í¬ íŒŒì´í”„ë¼ì¸

**ì°¨ì´ì :**
- ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ ë„êµ¬ (Docker Compose vs K8s)
- ë°°í¬ ì‹¤í–‰ ë°©ë²• (SSH vs ArgoCD)
- ë³µì¡ë„ (Simple vs Enterprise)

## ğŸ’­ ë°°ìš°ë©´ì„œ ì´í•´í•œ í•µì‹¬

### 1. ì¤‘ì•™ ë°°í¬ ë ˆí¬ì˜ ì¥ì 

**Before (ë°°í¬ ë ˆí¬ ì—†ì´):**
```
user-service CI â†’ EC2 SSH â†’ docker-compose up user
board-service CI â†’ EC2 SSH â†’ docker-compose up board

ë¬¸ì œì :
- docker-compose.ymlì´ ë‘ ë ˆí¬ì— ì¤‘ë³µ
- í™˜ê²½ë³€ìˆ˜ ê´€ë¦¬ê°€ ë¶„ì‚°ë¨
- ì „ì²´ ì•„í‚¤í…ì²˜ íŒŒì•… ì–´ë ¤ì›€
```

**After (ì¤‘ì•™ ë°°í¬ ë ˆí¬ ì‚¬ìš©):**
```
user-service CI â†’ ì´ë¯¸ì§€ ë¹Œë“œë§Œ
board-service CI â†’ ì´ë¯¸ì§€ ë¹Œë“œë§Œ
deploy-config â†’ í†µí•© ë°°í¬ ê´€ë¦¬

ì¥ì :
- ëª…í™•í•œ ì±…ì„ ë¶„ë¦¬ âœ…
- ì¸í”„ë¼ ì„¤ì • ì¤‘ì•™í™” âœ…
- ë…ë¦½ì ì¸ ë°°í¬ ê°€ëŠ¥ âœ…
```

### 2. GitOps íŒ¨í„´ì˜ ë³¸ì§ˆ

"Gitì´ Single Source of Truth"

ë°°í¬ ìƒíƒœë¥¼ ë³´ë ¤ë©´ Git ë ˆí¬ë¥¼ ë³´ë©´ ëœë‹¤:
- docker-compose.ymlì„ ë³´ë©´ í˜„ì¬ ìš´ì˜ ì¤‘ì¸ ì„œë¹„ìŠ¤ êµ¬ì¡° íŒŒì•…
- kustomization.yamlì„ ë³´ë©´ í˜„ì¬ ë°°í¬ëœ ì´ë¯¸ì§€ ë²„ì „ í™•ì¸
- Git íˆìŠ¤í† ë¦¬ë¡œ ë°°í¬ ì´ë ¥ ì¶”ì 

### 3. Docker Compose â†’ K8sëŠ” ìì—°ìŠ¤ëŸ¬ìš´ ì§„í™”

```
í•™ìŠµ ê³¡ì„ :
     Simple                                Complex
        â”‚                                     â”‚
        â–¼                                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Local Docker  â”‚ Docker Compose  â”‚  Kubernetes  â”‚
â”‚               â”‚   + GitOps      â”‚   + ArgoCD   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              ê°™ì€ íŒ¨í„´, ë‹¤ë¥¸ ë„êµ¬
```

Docker Composeë¡œ ì‹œì‘í•´ì„œ K8së¡œ í™•ì¥í•˜ëŠ” ê²Œ ì´í•´í•˜ê¸° ì‰¬ì› ë‹¤.

### 4. ë¸Œëœì¹˜ ì „ëµì˜ ì¤‘ìš”ì„±

deploy ë¸Œëœì¹˜ë¥¼ ë¶„ë¦¬í•˜ë‹ˆê¹Œ:
- ê°œë°œì€ ììœ ë¡­ê²Œ (mainì—ì„œ)
- ë°°í¬ëŠ” ì‹ ì¤‘í•˜ê²Œ (deployë¡œ PR)
- ì‹¤ìˆ˜ ë°©ì§€ (ë¸Œëœì¹˜ ë³´í˜¸ ê·œì¹™)

ì‹¤ë¬´ íŒ¨í„´ì„ ë°°ìš°ë©´ì„œ ì•ˆì „ì„±ë„ í™•ë³´í•˜ëŠ” ì¢‹ì€ ë°©ë²•ì´ì—ˆë‹¤.

## ğŸ“ ì‹¤ì „ íŒ

### 1. í•™ìŠµì‹œ í”„ë¡œì íŠ¸ ë°°í¬ ì „ëµ

```
ì´ˆê¸°: Docker Compose + ì¤‘ì•™ ë°°í¬ ë ˆí¬
  â””â”€ ê°œë… ì´í•´í•˜ê¸° ì‰¬ì›€
  â””â”€ ë¹ ë¥¸ í”¼ë“œë°±

í›„ë°˜: K8s + ArgoCD
  â””â”€ ì‹¤ë¬´ íŒ¨í„´ ê²½í—˜
  â””â”€ í™•ì¥ ê°€ëŠ¥í•œ êµ¬ì¡°
```

### 2. ì„œë¹„ìŠ¤ ê°„ í†µì‹ 

Docker Compose ë„¤íŠ¸ì›Œí¬ ë‚´ì—ì„œëŠ” **ì„œë¹„ìŠ¤ëª…ìœ¼ë¡œ í˜¸ì¶œ ê°€ëŠ¥**:

```java
// user-service ì½”ë“œ (Java Spring)
@Service
public class BoardServiceClient {

    private final RestTemplate restTemplate;

    @Value("${board.service.url}")  // http://board-service:3002
    private String boardServiceUrl;

    public List<Board> getUserBoards(Long userId) {
        String url = boardServiceUrl + "/api/boards/user/" + userId;
        return restTemplate.getForObject(url, List.class);
    }
}
```

K8së„ ë™ì¼:
```java
// application.yml
board:
  service:
    url: http://board-service.default.svc.cluster.local:3002
```

### 3. ì‹œí¬ë¦¿ ê´€ë¦¬

ì¤‘ìš”í•œ ì •ë³´ëŠ” Gitì— ì˜¬ë¦¬ì§€ ì•Šê¸°:
```bash
# .gitignore
.env
secrets/
```

GitHub Secrets ì‚¬ìš©:
```yaml
env:
  DB_PASSWORD: ${{ secrets.DB_PASSWORD }}
```

## ğŸ“š ì°¸ê³  ìë£Œ

- [GitOps - What is GitOps](https://www.gitops.tech/)
- [ArgoCD Documentation](https://argo-cd.readthedocs.io/)
- [GitHub Actions - Repository Dispatch](https://docs.github.com/en/actions/using-workflows/events-that-trigger-workflows#repository_dispatch)
- [Kustomize Documentation](https://kustomize.io/)
- [Docker Compose Networking](https://docs.docker.com/compose/networking/)

---

**ì‘ì„±ì¼**: 2025-10-26
**í•™ìŠµ í™˜ê²½**: Docker Compose (ë¡œì»¬), K3s (ì‹¤ìŠµìš©)
**í‚¤ì›Œë“œ**: GitOps, ì¤‘ì•™ ë°°í¬ ë ˆí¬ì§€í† ë¦¬, ArgoCD, ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ CI/CD
