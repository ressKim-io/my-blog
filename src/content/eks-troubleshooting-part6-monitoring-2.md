---
title: "EKS ëª¨ë‹ˆí„°ë§ êµ¬ì¶•ê¸° (2): S3ë¡œ ì „í™˜í•˜ê¸°"
excerpt: "PVCì—ì„œ S3ë¡œ ëª¨ë‹ˆí„°ë§ ìŠ¤í† ë¦¬ì§€ ì „í™˜ - Pod Identity, ë²„ì „ í˜¸í™˜ì„±, ì´ë¯¸ì§€ ë¬¸ì œ"
category: kubernetes
tags:
  - EKS
  - Troubleshooting
  - Prometheus
  - Loki
  - Tempo
  - S3
  - Pod-Identity
series:
  name: "eks-troubleshooting"
  order: 6
date: '2025-12-31'
---

## ğŸ¯ í•œ ì¤„ ìš”ì•½

> ëª¨ë‹ˆí„°ë§ ìŠ¤í† ë¦¬ì§€ë¥¼ PVCì—ì„œ S3ë¡œ ì „í™˜í•˜ë©´ì„œ, Pod Identity ë¯¸ì§€ì›, ë²„ì „ í˜¸í™˜ì„±, ì´ë¯¸ì§€ íƒœê·¸ ë¬¸ì œë¥¼ ê²ªì—ˆë‹¤.

## ğŸ“Š Impact

- **ì˜í–¥ ë²”ìœ„**: Loki, Tempo ìŠ¤í† ë¦¬ì§€ ì „í™˜ ì‹¤íŒ¨
- **ì†Œìš” ì‹œê°„**: ì•½ 6ì‹œê°„
- **ë°œìƒì¼**: 2025-12-31

---

## ğŸ’¡ ì™œ S3ë¡œ ì „í™˜í–ˆë‚˜?

PVC ê¸°ë°˜ ìŠ¤í† ë¦¬ì§€ì˜ ë¬¸ì œì :

| ë¬¸ì œ | ì„¤ëª… |
|------|------|
| **í™•ì¥ì„±** | EBS ë³¼ë¥¨ í¬ê¸° ì œí•œ, ìˆ˜ë™ í™•ì¥ í•„ìš” |
| **ë¹„ìš©** | gp3ë„ ì¥ê¸° ë³´ê´€ì—ëŠ” ë¹„ìŒˆ |
| **ê°€ìš©ì„±** | AZ ì¥ì•  ì‹œ ë°ì´í„° ì ‘ê·¼ ë¶ˆê°€ |
| **Lock ì¶©ëŒ** | RWOë¡œ ì¸í•œ Pod ì—…ë°ì´íŠ¸ ë¬¸ì œ |

S3 ê¸°ë°˜ ìŠ¤í† ë¦¬ì§€ì˜ ì¥ì :

- **ë¬´ì œí•œ í™•ì¥**
- **ì €ë ´í•œ ë¹„ìš©** (S3 Intelligent-Tiering)
- **ë©€í‹° AZ ë‚´êµ¬ì„±**
- **Lock ì¶©ëŒ ì—†ìŒ**

```
Before: Prometheus/Loki/Tempo â†’ PVC (gp3)
After:  Prometheus â†’ PVC (ë©”íŠ¸ë¦­, ë‹¨ê¸°)
        Loki â†’ S3 (ë¡œê·¸, ì¥ê¸°)
        Tempo â†’ S3 (íŠ¸ë ˆì´ìŠ¤, ì¥ê¸°)
```

---

## ğŸ”¥ 1. Tempo S3 Access Denied - Pod Identity ë¯¸ì§€ì›

### ì¦ìƒ

Tempoë¥¼ S3ë¡œ ì „í™˜í–ˆëŠ”ë°:

```bash
$ kubectl logs deploy/tempo -n wealist-prod
unexpected error from ListObjects on wealist-prod-tempo-traces: Access Denied
```

`Access Denied`. S3 ì ‘ê·¼ ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.

### ì›ì¸ ë¶„ì„

**1ë‹¨ê³„: S3 ë²„í‚· í™•ì¸**

```bash
$ aws s3 ls s3://wealist-prod-tempo-traces
(ì •ìƒ ì¶œë ¥)
```

ë²„í‚·ì€ ìˆìŠµë‹ˆë‹¤.

**2ë‹¨ê³„: Pod Identity í™•ì¸**

```bash
$ kubectl get pods -n wealist-prod -l app=tempo -o yaml | grep serviceAccountName
serviceAccountName: tempo

$ kubectl get sa tempo -n wealist-prod
Error: serviceaccounts "tempo" not found
```

ServiceAccountê°€ ì—†ìŠµë‹ˆë‹¤!

**3ë‹¨ê³„: ServiceAccount ìƒì„± í›„ ì¬ì‹œë„**

ServiceAccountë¥¼ ìƒì„±í•˜ê³  Pod Identityë¥¼ ì—°ê²°í–ˆìŠµë‹ˆë‹¤. ê·¸ëŸ°ë° ì—¬ì „íˆ Access Denied.

**4ë‹¨ê³„: Pod ë‚´ë¶€ì—ì„œ AWS CLI í…ŒìŠ¤íŠ¸**

```bash
$ kubectl exec -n wealist-prod deploy/tempo -- aws s3 ls s3://wealist-prod-tempo-traces
2025-12-31 09:00:00 wealist-prod-tempo-traces
```

AWS CLIëŠ” ì„±ê³µí•©ë‹ˆë‹¤! ê·¸ëŸ°ë° Tempo ìì²´ëŠ” ì‹¤íŒ¨í•©ë‹ˆë‹¤.

**5ë‹¨ê³„: ê·¼ë³¸ ì›ì¸ ë°œê²¬**

Tempo 2.3.1ì€ ë‚´ë¶€ì ìœ¼ë¡œ `minio-go` ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ì´ ë²„ì „ì˜ minio-goëŠ” **EKS Pod Identityë¥¼ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤**.

```
EKS Pod Identity (2023ë…„ ì¶œì‹œ)
  â†“
minio-go 7.0.70+ ì—ì„œ ì§€ì›
  â†“
Tempo 2.3.1ì€ minio-go 7.0.50 ì‚¬ìš© â†’ Pod Identity ë¯¸ì§€ì›!
```

### í•´ê²°

**Tempo ë²„ì „ ì—…ê·¸ë ˆì´ë“œ**:

```yaml
# k8s/helm/environments/prod.yaml
tempo:
  image:
    repository: grafana/tempo
    tag: "2.6.1"  # 2.3.1 â†’ 2.6.1 (Pod Identity ì§€ì›)
```

Tempo 2.6.1ì€ minio-go 7.0.70+ë¥¼ ì‚¬ìš©í•˜ì—¬ Pod Identityë¥¼ ì§€ì›í•©ë‹ˆë‹¤.

### Pod Identity vs IRSA

| ë°©ì‹ | ì¶œì‹œ | ì¥ì  | ë‹¨ì  |
|------|------|------|------|
| IRSA | 2019 | ì„±ìˆ™, ì•ˆì •ì  | OIDC ì„¤ì • ë³µì¡ |
| **Pod Identity** | 2023 | ê°„ë‹¨, EKS í†µí•© | ë¼ì´ë¸ŒëŸ¬ë¦¬ í˜¸í™˜ì„± |

ìƒˆ í”„ë¡œì íŠ¸ì—ì„œëŠ” Pod Identityê°€ ë” ê°„ë‹¨í•˜ì§€ë§Œ, ë¼ì´ë¸ŒëŸ¬ë¦¬ í˜¸í™˜ì„±ì„ í™•ì¸í•´ì•¼ í•©ë‹ˆë‹¤.

### í•µì‹¬ í¬ì¸íŠ¸

- **Pod IdentityëŠ” ë¹„êµì  ìƒˆë¡œìš´ ê¸°ëŠ¥ì´ë¼ ëª¨ë“  ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì§€ì›í•˜ì§€ ì•ŠëŠ”ë‹¤**
- **AWS CLI ë™ì‘ â‰  ì• í”Œë¦¬ì¼€ì´ì…˜ ë™ì‘** - ì¸ì¦ ë©”ì»¤ë‹ˆì¦˜ì´ ë‹¤ë¥¼ ìˆ˜ ìˆìŒ
- **ë²„ì „ ì—…ê·¸ë ˆì´ë“œë¡œ í•´ê²° ê°€ëŠ¥í•œ ê²½ìš°ê°€ ë§ë‹¤**

---

## ğŸ”¥ 2. Loki 3.x ì„¤ì • í˜¸í™˜ì„± ì˜¤ë¥˜

### ì¦ìƒ

Lokië¥¼ 2.9.2ì—ì„œ 3.6.3ìœ¼ë¡œ ì—…ê·¸ë ˆì´ë“œí–ˆë”ë‹ˆ:

```bash
$ kubectl logs deploy/loki -n wealist-prod
failed parsing config: yaml: unmarshal errors:
line 42: field enforce_metric_name not found in type validation.plain
```

ì„¤ì • íŒŒì¼ íŒŒì‹± ì˜¤ë¥˜ì…ë‹ˆë‹¤.

### ì›ì¸ ë¶„ì„

Loki 3.xì—ì„œ `enforce_metric_name` í•„ë“œê°€ deprecated ë˜ì—ˆìŠµë‹ˆë‹¤:

```yaml
# ê¸°ì¡´ ì„¤ì • (2.x í˜¸í™˜)
limits_config:
  enforce_metric_name: false  # â† 3.xì—ì„œ ì‚­ì œë¨!
  reject_old_samples: true
```

### í•´ê²°

**deprecated í•„ë“œ ì œê±°**:

```yaml
# ìˆ˜ì •ëœ ì„¤ì • (3.x í˜¸í™˜)
limits_config:
  reject_old_samples: true
  reject_old_samples_max_age: 168h
  # enforce_metric_name ì‚­ì œ
```

**Loki 3.x ì¶”ê°€ ë³€ê²½ì‚¬í•­**:

```yaml
# Before (2.x)
schema_config:
  configs:
    - from: 2020-10-24
      store: boltdb-shipper
      object_store: s3
      schema: v11

# After (3.x)
schema_config:
  configs:
    - from: 2020-10-24
      store: tsdb
      object_store: s3
      schema: v13
      index:
        prefix: loki_index_
        period: 24h
```

| í•­ëª© | 2.x | 3.x |
|------|-----|-----|
| store | boltdb-shipper | **tsdb** |
| schema | v11 | **v13** |
| enforce_metric_name | ìˆìŒ | **ì‚­ì œ** |

### í•µì‹¬ í¬ì¸íŠ¸

- **ë©”ì´ì € ë²„ì „ ì—…ê·¸ë ˆì´ë“œ ì‹œ breaking changes í™•ì¸ í•„ìˆ˜**
- **Loki 3.xëŠ” TSDB ê¸°ë°˜ìœ¼ë¡œ ì™„ì „íˆ ë³€ê²½ë¨**
- ê³µì‹ Migration Guideë¥¼ ë°˜ë“œì‹œ í™•ì¸

---

## ğŸ”¥ 3. ì´ë¯¸ì§€ íƒœê·¸ê°€ ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤

### ì¦ìƒ

ëª¨ë‹ˆí„°ë§ ì»´í¬ë„ŒíŠ¸ë“¤ì´ ImagePullBackOff:

```bash
$ kubectl get pods -n wealist-prod
prometheus-xxx   0/1   ImagePullBackOff
loki-xxx         0/1   ImagePullBackOff
alloy-xxx        0/1   ImagePullBackOff
```

```bash
$ kubectl describe pod prometheus-xxx -n wealist-prod | grep -A3 Events
Failed to pull image "prom/prometheus:v2.56.1": not found
```

`v2.56.1` íƒœê·¸ê°€ ì—†ìŠµë‹ˆë‹¤.

### ì›ì¸ ë¶„ì„

prod.yamlì— ì§€ì •ëœ ë²„ì „ë“¤:

```yaml
prometheus:
  image:
    tag: "v2.56.1"  # ì¡´ì¬í•˜ì§€ ì•ŠìŒ!
loki:
  image:
    tag: "2.10.6"   # ì¡´ì¬í•˜ì§€ ì•ŠìŒ!
alloy:
  image:
    tag: "1.5.0"    # ì¡´ì¬í•˜ì§€ ì•ŠìŒ!
```

Docker Hubì—ì„œ ì‹¤ì œ íƒœê·¸ í™•ì¸:

```bash
$ curl -s "https://hub.docker.com/v2/repositories/prom/prometheus/tags" | \
  jq -r '.results[].name' | grep "^v2\." | head -5
v2.55.1
v2.55.0
v2.54.1
...
```

**v2.56.1ì€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤!** (ì•„ì§ ë¦´ë¦¬ìŠ¤ ì•ˆ ë¨)

### í•´ê²°

ì‹¤ì œ ì¡´ì¬í•˜ëŠ” ìµœì‹  íƒœê·¸ë¡œ ë³€ê²½:

```yaml
# k8s/helm/environments/prod.yaml

prometheus:
  image:
    tag: "v2.55.1"  # ì‹¤ì œ ìµœì‹ 

loki:
  image:
    tag: "3.6.3"    # 3.x ìµœì‹ 

alloy:
  image:
    tag: "v1.12.1"  # v ì ‘ë‘ì‚¬ í¬í•¨
```

### íƒœê·¸ í™•ì¸ ë°©ë²•

```bash
# Docker Hub API
curl -s "https://hub.docker.com/v2/repositories/<org>/<repo>/tags" | jq '.results[].name'

# skopeo
skopeo list-tags docker://<org>/<repo>

# crane
crane ls <org>/<repo>
```

### ìµœì¢… ë²„ì „ ë§¤íŠ¸ë¦­ìŠ¤

| ì»´í¬ë„ŒíŠ¸ | ì˜ëª»ëœ ë²„ì „ | ì‹¤ì œ ìµœì‹  |
|----------|------------|----------|
| Prometheus | v2.56.1 | **v2.55.1** |
| Loki | 2.10.6 | **3.6.3** |
| Alloy | 1.5.0 | **v1.12.1** |
| Grafana | 10.2.2 | **10.4.12** |

### í•µì‹¬ í¬ì¸íŠ¸

- **ì´ë¯¸ì§€ íƒœê·¸ëŠ” ì¡´ì¬ ì—¬ë¶€ë¥¼ ê¼­ í™•ì¸í•´ì•¼ í•œë‹¤**
- **v ì ‘ë‘ì‚¬ ìœ ë¬´ê°€ ë‹¤ë¥¼ ìˆ˜ ìˆë‹¤** (1.5.0 vs v1.12.1)
- **CI/CDì—ì„œ ì´ë¯¸ì§€ ì¡´ì¬ í™•ì¸ ë‹¨ê³„ ì¶”ê°€ ê¶Œì¥**

---

## ğŸ”¥ 4. OTEL Collector ë°”ì´ë„ˆë¦¬ ê²½ë¡œ ë³€ê²½

### ì¦ìƒ

OTEL Collectorë¥¼ ì—…ê·¸ë ˆì´ë“œí–ˆë”ë‹ˆ:

```bash
$ kubectl logs deploy/otel-collector -n wealist-prod
exec /otelcol-contrib: no such file or directory
```

ë°”ì´ë„ˆë¦¬ íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤.

### ì›ì¸ ë¶„ì„

OTEL Collector ì´ë¯¸ì§€ì˜ ì—”íŠ¸ë¦¬í¬ì¸íŠ¸ê°€ ë²„ì „ë§ˆë‹¤ ë‹¤ë¦…ë‹ˆë‹¤:

```
0.92.0: /otelcol-contrib
0.116.0: /otelcol  # ë˜ëŠ” ë‹¤ë¥¸ ê²½ë¡œ
```

### í•´ê²°

**ì•ˆì • ë²„ì „ ìœ ì§€**:

```yaml
otelCollector:
  image:
    repository: otel/opentelemetry-collector-contrib
    tag: "0.92.0"  # í˜„ì¬ ë™ì‘í•˜ëŠ” ë²„ì „ ìœ ì§€
```

ì—…ê·¸ë ˆì´ë“œê°€ í•„ìš”í•˜ë‹¤ë©´ ë¦´ë¦¬ìŠ¤ ë…¸íŠ¸ì—ì„œ breaking changes í™•ì¸ í›„ ì§„í–‰.

### í•µì‹¬ í¬ì¸íŠ¸

- **ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ì˜ ì—”íŠ¸ë¦¬í¬ì¸íŠ¸ê°€ ë²„ì „ë§ˆë‹¤ ë‹¤ë¥¼ ìˆ˜ ìˆë‹¤**
- **ê¸‰í•˜ê²Œ ì—…ê·¸ë ˆì´ë“œí•˜ì§€ ë§ê³  ë¦´ë¦¬ìŠ¤ ë…¸íŠ¸ í™•ì¸**
- **ë™ì‘í•˜ëŠ” ë²„ì „ì„ ëª…ì‹œì ìœ¼ë¡œ ê³ ì •í•˜ëŠ” ê²ƒë„ ì „ëµ**

---

## ğŸ“š ì¢…í•© ì •ë¦¬

### S3 ì „í™˜ ì²´í¬ë¦¬ìŠ¤íŠ¸

```
[ ] S3 ë²„í‚· ìƒì„± (Terraform)
[ ] Pod Identity ë˜ëŠ” IRSA ì„¤ì •
[ ] ServiceAccount ìƒì„± ë° ì—°ê²°
[ ] ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ AWS SDK/ë¼ì´ë¸ŒëŸ¬ë¦¬ ë²„ì „ í™•ì¸
[ ] ì„¤ì • íŒŒì¼ í˜¸í™˜ì„± í™•ì¸ (ë²„ì „ ì—…ê·¸ë ˆì´ë“œ ì‹œ)
[ ] ì´ë¯¸ì§€ íƒœê·¸ ì¡´ì¬ ì—¬ë¶€ í™•ì¸
```

### ìµœì¢… ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Monitoring Stack                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚ Prometheus â”‚   â”‚    Loki    â”‚   â”‚   Tempo    â”‚           â”‚
â”‚  â”‚  v2.55.1   â”‚   â”‚   3.6.3    â”‚   â”‚   2.6.1    â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚        â”‚                â”‚                â”‚                   â”‚
â”‚        â–¼                â–¼                â–¼                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚    PVC     â”‚   â”‚     S3     â”‚   â”‚     S3     â”‚           â”‚
â”‚  â”‚ (ë‹¨ê¸° ë³´ê´€)â”‚   â”‚ (ë¡œê·¸ ë³´ê´€)â”‚   â”‚(íŠ¸ë ˆì´ìŠ¤) â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                  Pod Identity                          â”‚ â”‚
â”‚  â”‚        (ServiceAccount â† IAM Role â† S3 Policy)        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ë²„ì „ í˜¸í™˜ì„± ë§¤íŠ¸ë¦­ìŠ¤

| ì»´í¬ë„ŒíŠ¸ | ë²„ì „ | Pod Identity | S3 ì§€ì› |
|----------|------|--------------|---------|
| Tempo | 2.6.1+ | âœ… | âœ… |
| Loki | 3.x | âœ… | âœ… |
| Prometheus | 2.x | N/A | ë¡œì»¬ ì €ì¥ |
| Grafana | 10.x | N/A | N/A |

---

## ğŸ¤” ìŠ¤ìŠ¤ë¡œì—ê²Œ ë˜ì§€ëŠ” ì§ˆë¬¸

### 1. PVC vs S3, ëª¨ë‹ˆí„°ë§ ìŠ¤í† ë¦¬ì§€ ì„ íƒ ê¸°ì¤€ì€?

**PVC ì‚¬ìš©:**
- ë‹¨ê¸° ë³´ê´€ (Prometheus ë©”íŠ¸ë¦­)
- ë¹ ë¥¸ ì¿¼ë¦¬ ì‘ë‹µ í•„ìš”
- ë°ì´í„°ëŸ‰ì´ ì ì„ ë•Œ

**S3 ì‚¬ìš©:**
- ì¥ê¸° ë³´ê´€ (ë¡œê·¸, íŠ¸ë ˆì´ìŠ¤)
- ë¹„ìš© ìµœì í™” í•„ìš”
- ëŒ€ìš©ëŸ‰ ë°ì´í„°

### 2. Pod Identity vs IRSA, ì–¸ì œ ë­˜ ì„ íƒí• ê¹Œ?

**Pod Identity:**
- ìƒˆ í”„ë¡œì íŠ¸
- EKS 1.24+
- ê°„ë‹¨í•œ ì„¤ì • ì›í•  ë•Œ

**IRSA:**
- ê¸°ì¡´ í”„ë¡œì íŠ¸
- ë¼ì´ë¸ŒëŸ¬ë¦¬ í˜¸í™˜ì„± ë¬¸ì œ ì‹œ
- ë” ì„¸ë°€í•œ ì œì–´ í•„ìš”

### 3. ë²„ì „ ì—…ê·¸ë ˆì´ë“œ ì „ í™•ì¸í•´ì•¼ í•  ê²ƒì€?

```bash
# 1. ë¦´ë¦¬ìŠ¤ ë…¸íŠ¸ì—ì„œ breaking changes í™•ì¸
# 2. ì´ë¯¸ì§€ íƒœê·¸ ì¡´ì¬ í™•ì¸
skopeo list-tags docker://grafana/loki | grep 3.6

# 3. ì„¤ì • íŒŒì¼ í˜¸í™˜ì„± ì²´í¬
# 4. ë¼ì´ë¸ŒëŸ¬ë¦¬/SDK ë²„ì „ í™•ì¸ (Pod Identity ë“±)
# 5. ìŠ¤í…Œì´ì§•ì—ì„œ ë¨¼ì € í…ŒìŠ¤íŠ¸
```

### 4. ëª¨ë‹ˆí„°ë§ ìŠ¤íƒ ì—…ê·¸ë ˆì´ë“œ ì „ëµì€?

1. **í•œ ë²ˆì— í•˜ë‚˜ì”©** - Prometheus â†’ Loki â†’ Tempo
2. **ìŠ¤í…Œì´ì§• ë¨¼ì €** - Production ì „ì— í…ŒìŠ¤íŠ¸
3. **ë¡¤ë°± ê³„íš** - ì´ì „ ë²„ì „ìœ¼ë¡œ ë¹ ë¥¸ ë³µêµ¬
4. **ë°ì´í„° ë°±ì—…** - S3 ë²„ì „ ê´€ë¦¬ í™œì„±í™”

---

## ğŸ”— ë‹¤ìŒ í¸ ì˜ˆê³ 

ë‹¤ìŒ í¸ì—ì„œëŠ” **Go ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ EKS ë°°í¬**ì—ì„œ ê²ªì€ ë¬¸ì œë“¤ì„ ë‹¤ë£¹ë‹ˆë‹¤:
- OAuth2 ì„¸ì…˜ ë¬¸ì œ (Multiple Pods í™˜ê²½)
- Go genproto ëª¨ë“ˆ ì¶©ëŒ (ambiguous import)
- OTel Schema URL ì¶©ëŒ (GORM í”ŒëŸ¬ê·¸ì¸ ë²„ì „)

ì˜ˆìƒì¹˜ ëª»í•œ Go ì˜ì¡´ì„± ì§€ì˜¥ì„ ê³µìœ í•˜ê² ìŠµë‹ˆë‹¤.

---

## ğŸ”— ì°¸ê³ 

- [Loki 3.0 Migration Guide](https://grafana.com/docs/loki/latest/setup/migrate/)
- [Tempo S3 Backend](https://grafana.com/docs/tempo/latest/configuration/#storage)
- [EKS Pod Identity](https://docs.aws.amazon.com/eks/latest/userguide/pod-identities.html)
- [minio-go EKS Pod Identity Support](https://github.com/minio/minio-go/releases/tag/v7.0.70)
